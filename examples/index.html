<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>APTO PCI SDK Interactive example</title>
	<script src="https://cdn.jsdelivr.net/npm/@apto-payments/pci-sdk-web@2/dist/umd/apto-pci-sdk.min.js"></script>

	<style>
		* {
			box-sizing: border-box;
		}

		body {
			font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
		}

		main {
			border: 1px solid gray;
			width: 400px;
			height: 400px;
			display: flex;
			justify-content: center;
			align-items:center;
			background-color: aliceblue;
		}
	</style>
</head>
<body>
<aside>
	<form id="init_form">
		<label for="userToken">User token:</label>
		<input name="userToken" type="text" />

		<label for="cardId">Card ID:</label>
		<input name="cardId" type="text" />

		<label for="apiKey">Api Key:</label>
		<input name="apiKey" type="text" />

		<label for="environment">User token:</label>
		<select name="environment">
			<option value="sbx">sbx</option>
			<option value="prd">prd</option>
		</select>

		<button type="submit"> Init </button>



	</form>

	<button type="button" id="btnShow"> Show PCI Data </button>
	<button type="button" id="btnHide"> Hide PCI Data </button>

	<button type="button" id="btnThemeLight" > Light Theme </button>
	<button type="button" id="btnThemeDark" > Dark Theme </button>

</aside>
<main>
	<div id="apto-pci-sdk">
		Card data will appear here
	</div>
</main>

<script>
	// Prepopulate fields based on query parameters
	new URLSearchParams(window.location.search)
	.forEach((value, key) => document.getElementsByName(key)[0].setAttribute('value', value));

	// Set listeners
	document.getElementById('init_form').addEventListener('submit', init);
	document.getElementById('btnShow').addEventListener('click', () => AptoPCISdk.showPCIData());
	document.getElementById('btnHide').addEventListener('click', () => AptoPCISdk.hidePCIData());
	document.getElementById('btnThemeLight').addEventListener('click', () => AptoPCISdk.setTheme('light'));
	document.getElementById('btnThemeDark').addEventListener('click', () => AptoPCISdk.setTheme('dark'));


	/**
	 *
	 */
	function init(event) {
		event.preventDefault();

		AptoPCISdk
			.init({
				auth: {
					cardId: event.target.elements.cardId.value,
					apiKey: event.target.elements.apiKey.value,
					userToken: event.target.elements.userToken.value,
					environment: event.target.elements.environment.value,
			}
		});
	}
</script>
</body>
</html>
